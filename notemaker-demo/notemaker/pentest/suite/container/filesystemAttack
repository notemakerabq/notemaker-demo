
cp attack_filesystem.sh remote.sh 

pod=$(kubectl get pods -n notemaker | grep mongodb | head -1 | awk '{print $1}')

kubectl cp remote.sh notemaker/$pod:/tmp/

kubectl exec -it -n notemaker $pod -- sh -c "/tmp/remote.sh"

sleep 4

running=$(kubectl get pods -n notemaker | grep mongodb | grep 'Running')

[[ -z "$running" ]] && \
   echo "------------ FILE SYSTEM ATTACK FAILED -----------------"

cnt=0
while [[ -z "$running" ]]; do 
   kubectl get pods -n notemaker | grep mongodb 
   running=$(kubectl get pods -n notemaker | grep mongodb | grep 'Running')
   sleep 5 
   ((cnt=cnt+1))
   [[ $cnt == 3 ]] && break
done





