
echo '>>> launching attack in web-service pod/container'

# find the first web-service pod that is Running
pod=$(kubectl get pods -n notemaker | grep web | grep Running | head -1 | awk '{print $1}')

kubectl cp rogue_process_attack.sh notemaker/$pod:/tmp/remote.sh

kubectl exec -it -n notemaker $pod -- sh -c "/tmp/remote.sh"

sleep 3

block=$(kubectl get pods -n notemaker | grep web | egrep 'Error|Crash')

if [[ ! -z "$block" ]]; then
   kubectl get pods -n notemaker | grep web 
   echo "--------------- PROCESS ATTACK FAILED ------------------"
fi


 



