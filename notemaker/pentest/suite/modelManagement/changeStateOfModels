#!/bin/bash
[ "$#" -ne 2 ] && \
  echo "Pass in part of image name and desired state {learn|relearn|active}" && exit -1
 
name=$1
state=$2

echo "name: $name, state: $state"

getModelIds $name
models="modelIDs-$name.txt"

num=$(wc -l < $models | awk '{print $1}')
echo "Changing state for $num models"

case $state in

    learn)
      discreetChangeState manualLearning $models 
      echo "All $name runtime models will be in learning mode until changed."
      ;;

    relearn) 
      discreetChangeState manualRelearning $models 
      echo "All $name runtime models are in relearn for 24 hours"
      ;;

 
   active)
      discreetChangeState manualLearning $models 
      discreetChangeState manualActive $models 
      echo "All $name runtime models are now active"      
      ;;

   *)
      echo "Unknown state change request"
      ;;
esac

